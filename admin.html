<script>
const form = document.getElementById('productForm');
const preview = document.getElementById('preview');

form.addEventListener('submit', function(e) {
    e.preventDefault();

    const produto = {
        id: Date.now(),
        nome: document.getElementById('name').value,
        categoria: document.getElementById('category').value,
        plataforma: document.getElementById('platform').value,
        preco: parseFloat(document.getElementById('price').value),
        link: document.getElementById('link').value,
        imagem: getImagePath(),
        destaque: "mais-procurados"
    };

    preview.innerHTML = `
        <h3>JSON do Produto</h3>
        <textarea style="width:100%;height:220px;">
${JSON.stringify(produto, null, 2)}
        </textarea>

        <p style="font-size:13px;color:#555;margin-top:8px">
            ðŸ‘‰ Copie este JSON e cole dentro de <b>data/produtos.json</b>
        </p>
    `;
});

function getImagePath() {
    const platform = document.getElementById('platform').value;
    const fileInput = document.getElementById('imageFile');

    if (fileInput.files.length > 0) {
        return `images/${platform}/${fileInput.files[0].name}`;
    }

    return "images/placeholder.png";
}
</script>
